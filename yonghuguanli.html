<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>用户管理</title>
    <script src="./config.js"></script>
    <script src="./lib/jquery-3.2.1.min.js"></script>
    <script src="./lib/jcookie/jquery.cookie.js"></script>
    <script src="./js/checkLogin.js"></script>
    <link rel="stylesheet" href="./lib/bootstrap-3.3.7/css/bootstrap.min.css">
    <link rel="stylesheet" href="./lib/bootstrap3-editable/css/bootstrap-editable.css">
    <script src="./lib/bootstrap-3.3.7/js/bootstrap.min.js"></script>
    <script src="./lib/bootstrap3-editable/js/bootstrap-editable.js"></script>
    <script src="http://192.168.0.163:8007/arcgis_js_api/library/3.22/3.22compact/init.js"></script>
    <link href="https://use.fontawesome.com/releases/v5.0.6/css/all.css" rel="stylesheet">
    <link rel="stylesheet" href="./css/yonghuguanli.css">
</head>

<body>
    <!-- 弹出框背景 -->
    <div id="grayBack">
        <i id="closeEdit" title="关闭" class="far fa-window-close fa-3x"></i>
    </div>



    <nav class="navbar navbar-default">
        <div class="container-fluid">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header">
                <img src="./images/logo.svg.png" width="100px" height="50px">
            </div>

            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav">
                    <li>
                        <a href="fuwuguanli.html">服务管理</a>
                    </li>
                    <li class="active">
                        <a href="#">用户管理</a>
                    </li>
                    <li>
                        <a href="#">设备管理</a>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Dropdown
                            <span class="caret"></span>
                        </a>
                        <ul class="dropdown-menu">
                            <li>
                                <a href="#">Action</a>
                            </li>
                            <li>
                                <a href="#">Another action</a>
                            </li>
                            <li>
                                <a href="#">Something else here</a>
                            </li>
                            <li role="separator" class="divider"></li>
                            <li>
                                <a href="#">Separated link</a>
                            </li>
                            <li role="separator" class="divider"></li>
                            <li>
                                <a href="#">One more separated link</a>
                            </li>
                        </ul>
                    </li>
                </ul>

                <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="./index.html">返回</a>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">admin
                            <span class="caret"></span>
                        </a>
                        <ul class="dropdown-menu">
                            <li>
                                <a href="#">我的资料</a>
                            </li>
                            <li role="separator" class="divider"></li>
                            <li>
                                <a href="#">退出</a>
                            </li>
                        </ul>
                    </li>
                </ul>
            </div>
            <!-- /.navbar-collapse -->
        </div>
        <!-- /.container-fluid -->
    </nav>


    <!-- 主界面容器 -->
    <div class="container-fluid" id="mainView">
        <div class="row">
            <div class="col-md-2 col-xs-2" id="treeContainer">
                <ul id="departmentList">
                </ul>
            </div>

            <div class="col-md-10 col-xs-10" id="mainContainer">
                <div id="grpContainer">
                    <div class="grpBtn">所有用户</div>
                    <div class="grpBtn">权限组1</div>
                    <div class="grpBtn">权限组2</div>
                    <div class="grpBtn">权限组3</div>
                </div>

                <div id="tHead">
                    <table class="table">
                        <thead>
                            <tr>
                                <th class="col-xs-2">登录名</th>
                                <th class="col-xs-2">真实姓名</th>
                                <th class="col-xs-4">邮箱</th>
                                <th class="col-xs-2">手机</th>
                                <th class="col-xs-2">是否管理员</th>
                            </tr>
                        </thead>
                    </table>
                </div>

                <div id="tBody">
                    <table class="table table-hover table-striped">
                        <tbody id="mainT">
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>


    <script>
        var departments = []

        $.ajax({
            type: 'get',
            async: false,
            url: "http://" + serverIP + ":" + serverPort + "/departmentsForTree",
            success: function (departmentsForTree) {
                for (var i = 0; i < departmentsForTree.length; i++) {
                    $("#departmentList").append("<li index='" + i + "' class='layerGroup'><div><span>" + departmentsForTree[i].depa.name + "</span></div><li>")
                }

                console.log(departmentsForTree)
            }
        })
    </script>
    <script src="./js/yonghuguanli.js"></script>
</body>